# Copy to .env and fill in. Never commit .env to git.
# Use this file for DEVELOPMENT. For production, see .env.production.example.

# ============== Environment ==============
NODE_ENV=development
PORT=4000

# ============== CORS ==============
# Allowed origins (dashboard, extension host page). Comma-separated.
# chrome-extension://* is always allowed by the server for the extension popup/content script.
# Development:
CORS_ORIGIN=http://localhost:5173,http://localhost:3000
# Production: add your dashboard; extension is allowed automatically.
# CORS_ORIGIN=https://mydomain.com,https://www.mydomain.com
# If you still get CORS errors in production, ensure OPTIONS preflight reaches this app (proxy passes it through).

# ============== Frontend & Backend URLs ==============
# Where to redirect after OAuth. Optional; defaults to first CORS origin.
# FRONTEND_URL=http://localhost:5173
# Production:
# FRONTEND_URL=https://mydomain.com

# Backend public URL (for logs; optional). Used when NODE_ENV=production.
# BACKEND_BASE_URL=http://localhost:4000

# ============== JWT ==============
# Use a long random string in production: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# ============== MySQL / TiDB Cloud ==============
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_mysql_password
DB_NAME=msync
# For TiDB Cloud: set DB_PORT=4000, DB_SSL=true, and DB_NAME to your cluster DB (e.g. m_sync).
# Optional: DB_CA_PATH=/path/to/ca.pem (for Dedicated; Starter/Essential use Node default CA).
# Optional: DB_SSL_REJECT_UNAUTHORIZED=false only for local debugging if you get cert errors.
# DB_SSL=true
# DB_CA_PATH=

# ============== GoHighLevel / LeadConnector OAuth ==============
# From Marketplace → My Apps → your app → Auth / API credentials.
GHL_CLIENT_ID=your-client-id-suffix
GHL_CLIENT_SECRET=your-client-secret

# Redirect URI must match EXACTLY what is in GHL Marketplace → your app → Auth → Redirect URLs.
# Use only ONE value; auth, code exchange, and refresh all use this. Mismatch causes "Invalid refresh token".
#
# Local with ngrok (Draft testing): use the full ngrok URL, no trailing slash.
# GHL_REDIRECT_URI=https://YOUR-NGROK-HOST.ngrok-free.dev/api/auth/callback
#
# Local without ngrok:
GHL_REDIRECT_URI=http://localhost:4000/api/auth/callback
#
# Production:
# GHL_REDIRECT_URI=https://mydomain.com/api/auth/callback

# Optional: GHL App ID (24-char hex). Do not set unless required; prefer GHL_INSTALLATION_URL.
# GHL_APP_ID=

# Optional: Use LeadConnector marketplace (set to "leadconnector" if your app is on leadconnectorhq.com).
# Fixes "No integration found" when the app is registered on LeadConnector, not GoHighLevel.
# GHL_MARKETPLACE=leadconnector

# Optional: Full Installation URL from Marketplace → My Apps → Auth/Testing (avoids "No integration found").
# GHL_INSTALLATION_URL=https://marketplace.gohighlevel.com/oauth/chooselocation?client_id=...

# ============== Google OAuth (Continue with Google) ==============
# Required to fix "Google sign-in not configured". See backend/GOOGLE-OAUTH-SETUP.md.
# In Google Cloud Console add redirect URI: http://localhost:4000/api/auth/google/callback (local)
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
